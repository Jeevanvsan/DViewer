<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Settings Display</title>
<style>
/* Base styling */
body {
  font-family: Arial, sans-serif;
  line-height: 1.6;
  padding: 20px;
}

.main-heading, .element-heading {
  cursor: pointer;
  display: flex;
  align-items: center;
  margin-bottom: 5px;
}

.column-name {
  margin-left: 20px;
  list-style-type: circle;
  display: none; /* Initially hide columns */
}

.icon {
  margin-right: 10px;
}

/* Nested arrangement */
.main-heading {
  font-weight: bold;
}

.element-heading {
  font-weight: normal;
  margin-left: 20px; /* Adjust the indentation */
}

.column-name {
  margin-left: 40px; /* Further indent columns */
}

</style>
</head>
<body>
<div id="settingsDisplay"></div>

<script>
  // Sample data
  const settingsData = {
    "parquet_connection": [{
      "name": "output2.parquet",
      "columns": [
        {"name": "_c0", "dataType": "string"},
        {"name": "_c1", "dataType": "string"},
        {"name": "_c2", "dataType": "string"},
        {"name": "_c3", "dataType": "string"},
        {"name": "_c4", "dataType": "string"}
      ]
    }],
    "csv_connection": [{
      "name": "out.csv",
      "columns": [
        {"name": "ProductID", "dataType": "string"},
        {"name": "Name", "dataType": "string"},
        {"name": "ProductNumber", "dataType": "string"}
      ]
    }],
    "sqlserver_connection": [{
      "name": "Address",
      "columns": [
        {"column_name": "AddressID", "data_type": "int"},
        {"column_name": "AddressLine1", "data_type": "nvarchar"},
        {"column_name": "City", "data_type": "nvarchar"}
      ]
    }]
  };

  // Function to create nested lists
  function createSettingsDisplay(data, container) {
    Object.keys(data).forEach(key => {
      const mainHeading = document.createElement('div');
      mainHeading.classList.add('main-heading');
      mainHeading.textContent = key;

      const mainIcon = document.createElement('span');
      mainIcon.classList.add('icon', 'icon-plus');
      mainIcon.textContent = '+';
      mainIcon.addEventListener('click', () => {
        toggleList(mainIcon, mainHeading.nextElementSibling);
      });

      mainHeading.prepend(mainIcon);
      
      const elementsContainer = document.createElement('div');
      elementsContainer.style.display = 'none';

      data[key].forEach(element => {
        const elementHeading = document.createElement('div');
        elementHeading.classList.add('element-heading');
        elementHeading.textContent = element.name;

        const elementIcon = document.createElement('span');
        elementIcon.classList.add('icon', 'icon-plus');
        elementIcon.textContent = '+';
        elementIcon.addEventListener('click', () => {
          toggleList(elementIcon, elementHeading.nextElementSibling);
        });

        elementHeading.prepend(elementIcon);

        const columnsList = document.createElement('ul');
        columnsList.classList.add('column-name');
        element.columns.forEach(column => {
          const columnItem = document.createElement('li');
          columnItem.textContent = column.name;
          columnsList.appendChild(columnItem);
        });

        elementsContainer.appendChild(elementHeading);
        elementsContainer.appendChild(columnsList);
      });

      container.appendChild(mainHeading);
      container.appendChild(elementsContainer);
    });
  }

  // Function to toggle list visibility
  function toggleList(icon, element) {
    if (element.style.display === 'none') {
      element.style.display = 'block';
      icon.textContent = '-';
    } else {
      element.style.display = 'none';
      icon.textContent = '+';
    }
  }

  // Initialize the settings display
  const settingsDisplay = document.getElementById('settingsDisplay');
  createSettingsDisplay(settingsData, settingsDisplay);
</script>
</body>
</html>
